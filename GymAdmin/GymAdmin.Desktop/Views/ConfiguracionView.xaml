<UserControl x:Class="GymAdmin.Desktop.Views.ConfiguracionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:GymAdmin.Desktop.Views"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <TabControl>
        <!-- General -->
        <TabItem Header="General">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <GroupBox Header="General" Margin="16">
                    <StackPanel Margin="12" Orientation="Vertical" >

                        <!-- Nombre del gimnasio -->
                        <TextBlock Text="Nombre del gimnasio*" />
                        <TextBox Text="{Binding NombreGym, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- Teléfono/WhatsApp -->
                        <TextBlock Margin="0,8,0,0" Text="WhatsApp / Teléfono*" />
                        <TextBox Text="{Binding Telefono, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- Email -->
                        <TextBlock Margin="0,8,0,0" Text="Email*" />
                        <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" />

                        <!-- Carpeta base -->
                        <DockPanel Margin="0,8,0,0">
                            <TextBlock VerticalAlignment="Center" Text="Carpeta base" Width="110"/>
                            <TextBox Text="{Binding DefaultFolder}" IsReadOnly="True"/>
                            <Button Content="Examinar..." Margin="8,0,0,0" Command="{Binding BrowseDefaultFolderCommand}"
                                    Style="{StaticResource PrimaryButtonStyle}"
                                    Width="100"
                                    HorizontalAlignment="Right"/>
                        </DockPanel>

                        <!-- Acciones -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                            <Button Content="Guardar" Command="{Binding SaveGeneralCommand}"
                                    Style="{StaticResource PrimaryButtonStyle}"/>
                        </StackPanel>

                    </StackPanel>
                </GroupBox>
            </ScrollViewer>
        </TabItem>

        <!-- Métodos de pago -->
        <TabItem Header="Métodos de pago">
            <Grid Margin="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Lista -->
                <DataGrid ItemsSource="{Binding PaymentMethods}"
                SelectedItem="{Binding SelectedPaymentMethod}"
                AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Nombre" Binding="{Binding Name}" Width="*"/>
                        <DataGridCheckBoxColumn Header="Habilitado" Binding="{Binding IsEnabled}" Width="100"/>
                        <DataGridTextColumn Header="Ajuste" Binding="{Binding AdjustmentDisplay}" Width="150"/>
                        <DataGridTextColumn Header="Orden" Binding="{Binding SortOrder}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Editor -->
                <StackPanel Grid.Column="1" Margin="12" DataContext="{Binding SelectedPaymentMethod}">
                    <!-- Nombre, Habilitado, Ajuste (Combo: Ninguno/%), Valor, Notas, Orden -->
                    <!-- Botones: Nuevo / Duplicar / Eliminar / Guardar cambios -->
                </StackPanel>
            </Grid>
        </TabItem>

        <!-- Importar / Exportar -->
        <TabItem Header="Importar / Exportar">
            <StackPanel Margin="16" Orientation="Vertical" >
                <!-- Export CSV: socios, pagos, rango fechas -->
                <!-- Descargar plantilla XLSX -->
                <!-- Import XLSX: seleccionar archivo, botón Validar (dry-run) => muestra grilla de errores -->
                <!-- Si ok: botón Importar definitivo -->
            </StackPanel>
        </TabItem>

        <!-- Backups -->
        <TabItem Header="Backups">
            <StackPanel Margin="16">
                <!-- Carpeta destino (Examinar...) -->
                <!-- Botón: Generar backup manual (zip con CSVs) -->
                <!-- Histórico corto (últimos 5), con link “Abrir carpeta” -->
            </StackPanel>
        </TabItem>

        <!-- Avanzado -->
        <TabItem Header="Avanzado">
            <StackPanel Margin="16">
                <!-- Exportar configuración (JSON), Importar configuración -->
                <!-- PIN para ingresar a Configuración -->
                <!-- Reset a fábrica -->
            </StackPanel>
        </TabItem>
    </TabControl>
</UserControl>
